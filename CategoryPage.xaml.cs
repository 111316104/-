using Microsoft.Maui.Controls;

namespace PD_app;

public partial class CategoryPage : ContentPage
{
    public string CategoryTitle { get; set; }
    public CategoryPage(string category)
	{
		InitializeComponent();
        CategoryTitle = category;
        BindingContext = this;
        LoadCategoryButtons(category);

        // 1. 讀取已儲存的字體大小並套用
        int fontSize = Preferences.Get("AppFontSize", 18);
        ApplyFontSize(fontSize);

        // 2. 訂閱字體大小變化事件
        MessagingCenter.Subscribe<ContentPage, int>(this, "FontSizeChanged", (sender, size) =>
        {
            ApplyFontSize(size);
        });

    }
    private void LoadCategoryButtons(string category)
    {
        ButtonStack.Children.Clear();

        switch (category)
        {
            case "🟦 自我照護與日常管理":
                AddStyledButton("衛生與感染預防", OnCounterClicked);
                AddStyledButton("透析操作流程注意", warningClicked);
                AddStyledButton("飲食與水分控制", waterClicked);
                AddStyledButton("生活習慣與日常建議", liveClicked);
                AddStyledButton("藥物使用與管理", medClicked);
                break;

            case "🟩 健康監測與追蹤":
                AddStyledButton("身體與心理狀況追蹤", bodyClicked);
                AddStyledButton("定期追蹤與醫療合作", hosClicked);
                AddStyledButton("自我學習與健康識能提升", mineClicked);
                break;

            case "🟨 心理與社會支持":
                AddStyledButton("心理調適與支援", emojiClicked);
                AddStyledButton("經濟與社會資源運用", socialClicked);
                AddStyledButton("家庭照護者指南", familyClicked);
                break;

            case "🟥 緊急應變與互動教學":
                AddStyledButton("災難應變與緊急備案", sosClicked);
                break;
        }
    }

    private void AddStyledButton(string text, EventHandler handler)
    {
        var button = new Button
        {
            Text = text,
            FontSize = 20,
            FontAttributes = FontAttributes.Bold,
            TextColor = Colors.White,
            BackgroundColor = Color.FromArgb("#A18276"),
            CornerRadius = 12,
            Padding = new Thickness(15),
            LineBreakMode = LineBreakMode.WordWrap,
            HorizontalOptions = LayoutOptions.FillAndExpand
        };

        button.Clicked += handler;

        var frame = new Frame
        {
            Content = button,
            CornerRadius = 16,
            Padding = new Thickness(0),
            Margin = new Thickness(0, 5),
            HasShadow = true,
            BackgroundColor = Colors.Transparent,
            BorderColor = Color.FromArgb("#A18276")
        };

        ButtonStack.Children.Add(frame);
    }


    private async void OnCounterClicked(object sender, EventArgs e)
    {
        string title = "衛生與感染預防";
        string[] faq = new string[]
        {
            "  1. 手部衛生:\n正確洗手：​每次更換透析液前，應使用肥皂和清水徹底洗手，至少20秒，並使用乾淨的毛巾或紙巾擦乾。​\n使用酒精消毒：​在無法洗手的情況下，可使用含酒精的手部消毒液進行手部清潔。​",
            "  2. 操作環境:\n保持清潔：​選擇一個乾淨、無塵、無風的房間進行透析操作，避免在有寵物的環境中進行。​\n避免干擾：​操作時，應關閉電風扇、空調等可能產生氣流的設備，以減少空氣中懸浮微粒的干擾。​",
            "  3. 個人防護:\n佩戴口罩：​在更換透析液時，應佩戴口罩，以防止呼吸道病原體的傳播。​\n穿著清潔衣物：​操作前應更換乾淨的衣物，避免衣物上的灰塵或細菌污染操作區域。​",
            "  4. 透析器材管理:\n器材消毒：​使用前，應確保所有透析器材已經過適當的消毒處理。​\n避免重複使用：​一次性使用的器材不得重複使用，以防止交叉感染。​",
            "  5. 導管護理:\n保持導管清潔：​每日檢查導管出口處，確保無紅腫、滲液等感染徵象。​\n固定導管：​使用透氣膠帶將導管固定，避免導管移動造成皮膚損傷或感染。​",
            "  6. 感染徵兆警覺:\n觀察症狀：​如出現腹痛、發燒、透析液混濁等症狀，應立即聯繫醫療人員。\n定期檢查：​定期回診，進行血液檢查和透析液培養，以早期發現潛在感染。",
            "  7. 教育與訓練:\n接受專業訓練：​在開始居家透析前，應接受醫療人員的專業訓練，學習正確的操作流程和感染預防措施。\n持續學習：​定期參加醫院舉辦的衛教課程，更新相關知識和技能。"
        };

        await Navigation.PushAsync(new EducationPage(title, faq));
    }

    private async void warningClicked(object sender, EventArgs e)
    {
        string title = "透析操作流程注意:";
        string[] faq = new string[]
        {
            "  操作前準備:\n\n" +
            "1. 環境清潔:\n" +
            "選擇一個乾淨、無塵、無風的房間進行透析操作，避免在有寵物的環境中進行。操作時，應關閉電風扇、空調等可能產生氣流的設備，以減少空氣中懸浮微粒的干擾。\n\n" +
            "2. 手部衛生:\n" +
            "每次更換透析液前，應使用肥皂和清水徹底洗手，至少20秒，並使用乾淨的毛巾或紙巾擦乾。在無法洗手的情況下，可使用含酒精的手部消毒液進行手部清潔。\n\n" +
            "3. 個人防護:\n" +
            "在更換透析液時，應佩戴口罩，以防止呼吸道病原體的傳播。操作前應更換乾淨的衣物，避免衣物上的灰塵或細菌污染操作區域。",

            "  透析操作流程:\n\n" +
            "1. 檢查器材:\n" +
            "確認透析液的種類、濃度、有效期限，並檢查包裝是否完整無損。\n\n" +
            "2. 連接導管:\n" +
            "使用無菌技術連接透析液袋與腹膜透析導管，避免觸碰接頭部分，以防止污染。\n\n" +
            "3. 注入透析液:\n" +
            "將透析液緩慢注入腹腔，注入時間約為10至15分鐘。\n\n" +
            "4. 停留時間:\n" +
            "讓透析液在腹腔內停留約4至6小時，期間可進行日常活動。\n\n" +
            "5. 引流透析液:\n" +
            "將使用過的透析液從腹腔引流出來，引流時間約為10至20分鐘。\n\n" +
            "6. 更換透析液:\n" +
            "重複上述步驟，每日更換透析液的次數依醫師指示進行。",

            "  操作後注意事項:\n\n" +
            "1. 檢查透析液:\n" +
            "觀察引流出的透析液是否清澈透明，若出現混濁、血色或異味，應立即聯繫醫療人員。\n\n" +
            "2. 導管護理:\n" +
            "每日檢查導管出口處，確保無紅腫、滲液等感染徵象。使用透氣膠帶將導管固定，避免導管移動造成皮膚損傷或感染。\n\n" +
            "3. 記錄透析情況:\n" +
            "詳細記錄每次透析的時間、透析液種類、注入量、引流量及透析液的外觀，供醫療人員參考。",

            "  常見問題與處理:\n\n" +
            "1. 注入困難:\n" +
            "若發現注入透析液時有困難，可能是導管阻塞或位置不當，應更換姿勢或輕輕按摩腹部，若仍無改善，應聯繫醫療人員。\n\n" +
            "2. 引流不順:\n" +
            "若引流透析液時流速變慢或停止，可能是導管被腸道壓迫或位置移動，應更換姿勢或輕輕按摩腹部，若仍無改善，應聯繫醫療人員。\n\n" +
            "3. 透析液混濁:\n" +
            "若引流出的透析液呈現混濁，可能是腹膜炎的徵兆，應立即聯繫醫療人員進行評估與治療。"
        };

        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void waterClicked(object sender, EventArgs e)
    {
        string title = "飲食與水分控制:";
        string[] faq = new string[]
        {
            "  1. 鈉（鹽分）攝取控制:\n避免高鈉食物：如罐頭食品、醃製食品、蜜餞、香腸、臘肉、醬油、番茄醬、沙茶醬、味精等，因為鈉攝取過多會造成水分堆積，增加體重和血壓負擔。\n\n烹調時減少鹽分：建議使用天然香料（如檸檬、香草）替代鹽，減少口渴感。",

            "  2. 蛋白質攝取:\n攝取優質蛋白質：建議每天攝取1.2克/公斤體重的蛋白質，選擇優質蛋白質來源，如雞蛋、魚、瘦肉、黃豆製品等。\n\n避免過量攝取：過多蛋白質可能增加代謝廢物，增加腎臟負擔。",

            "  3. 鉀與磷的攝取:\n鉀的攝取：一般情況下不需嚴格限制鉀的攝取，但若出現高血鉀症狀，應減少高鉀食物的攝取，如香蕉、橘子、馬鈴薯等。\n\n磷的攝取：限制高磷食物，如內臟、堅果、乳製品等，必要時可在餐時服用磷結合劑，以維持正常血磷值。",

            "  4. 糖類與脂肪的攝取:\n控制糖類攝取：部分腹膜透析液中含有葡萄糖，應注意總糖分攝取，避免血糖過高。\n\n選擇健康脂肪：避免飽和脂肪和反式脂肪，選擇橄欖油、魚油等健康脂肪來源。",

            "  5. 每日飲水量計算:\n有尿患者：每日飲水量 = 前一日尿量 + 500～700cc。\n\n無尿患者：每日飲水量約為500cc。",

            "  6. 控制體重增加:\n兩次透析間體重增加：不應超過乾體重的5%，以避免透析時出現低血壓、抽筋等併發症。",

            "  7. 減少口渴的方法:\n保持口腔濕潤：可用開水漱口，或含檸檬片、無糖口香糖、薄荷片等，減少口渴感。\n\n避免高鈉食物：減少鹽分攝取，降低口渴的可能性。\n\n避免長時間待在冷氣房：空氣乾燥可能增加口渴感。",

            "  8. 注意含水食物的攝取:\n限制高水分食物：如西瓜、湯品、果凍等，避免攝取過多水分。\n\n選擇乾飯或乾麵：主食建議選擇含水量較低的乾飯或乾麵，避免稀飯等高水分食物。"
};
        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void liveClicked(object sender, EventArgs e)
    {
        string title = "生活習慣與日常建議:";
        string[] faq = new string[]
        {
            "  身體狀況追蹤:\n\n" +
            "1.1 日常自我監測:\n" +
            "．體重：每日同一時間、同一服裝下測量（建議早上起床空腹、排空導管後），記錄「實測體重」與「乾體重」差值，若超過 2%–3%（兩次透析間），即需調整飲水量或透析處方。\n" +
            "．血壓與脈搏：每次透析前、透析後各測一次，記錄坐姿與立姿血壓，觀察有無姿勢性低血壓。注意頭暈、心悸等低血壓或高血壓症狀。\n" +
            "．腹圍與水腫檢查：定期測量腹部圍度，若突然增加可能有腹水或積液。觀察下肢、足部是否水腫，是否有壓痕性水腫（按壓凹陷即水腫）。\n" +
            "．透析液外觀與引流量：每次引流後檢視液體是否清澈無懸浮物，記錄注入量與引流量差值，若引流量持續減少，注意導管阻塞或黏連。\n" +
            "．尿量與餘留尿：若有自主排尿，記錄每日尿量。觀察有無血尿、蛋白尿或混濁現象。\n\n" +
            "1.2 定期檢查項目:\n" +
            "．血液檢查（每 1–3 月）：血清白蛋白、BUN/Cr、電解質（Na⁺、K⁺、Cl⁻、Ca²⁺、PO₄³⁻）、糖化血色素（HbA1c，若合併糖尿病）、全血球計數（WBC、Hb、Hct）。\n" +
            "．腹腔透析液培養（有混濁或感染徵象時）：送培養鑑定病原菌，並配合抗生素治療。\n" +
            "．心電圖與心臟超音波（有心血管病史者）：監測心功能與容積負荷狀況。",

            "  心理狀況追蹤:\n\n" +
            "2.1 自我覺察與記錄:\n" +
            "．情緒日誌：每日簡單記錄心情狀態（平靜、焦慮、憂鬱、易怒等），註記產生壓力的事件或思緒。\n" +
            "．睡眠品質：記錄入睡時間、夜間醒來次數與清晨起床時間，評估日間疲倦、注意力不集中情形。\n" +
            "．疲勞與體力：使用簡易疲勞量表（例如 0–10 分級）每日評估，留意活動後是否需長時間休息或心跳、呼吸急促。\n\n" +
            "2.2 親友與團隊支持:\n" +
            "．家庭互動：定期與家人分享治療進度與感受，請家人協助觀察情緒變化。安排陪伴與共同活動，減少孤立感。\n" +
            "．社會支持：參加病友團體或網路論壇，互相鼓勵與經驗交流。如有宗教或志工支持，可參加靜心、冥想、閱讀等活動。\n\n" +
            "2.3 專業評估與介入:\n" +
            "．心理篩檢（每 3–6 月）：使用簡易量表（PHQ-9 抑鬱量表、GAD-7 焦慮量表）評估情緒狀態。\n" +
            "．諮商與治療：若量表顯示中重度焦慮或憂鬱，建議轉介心理師或精神科醫師。可考慮團體支持、正念減壓課程（MBSR）或心智圖像療法。\n" +
            "．藥物輔助：必要時在醫師評估下，使用抗焦慮或抗憂鬱藥物。"
        };
        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void medClicked(object sender, EventArgs e)
    {
        string title = "藥物使用與管理:";
        string[] faq = new string[]
        {
            "  1. 藥物使用原則:\n" +
            "遵從醫囑：所有藥物應依醫師處方使用，切勿自行調整劑量或停藥。\n\n" +
            "定時服用：建立固定的服藥時間表，使用藥盒或提醒工具，確保不漏服。\n\n" +
            "與食物的關係：注意藥物與食物的相互作用，如某些藥物需空腹服用，某些則需與食物同服。",

            "  2. 常見藥物類型與注意事項:\n" +
            "降壓藥：腹膜透析患者常伴隨高血壓，應定期監測血壓，並依醫師指示調整降壓藥物。\n\n" +
            "磷結合劑：腎功能下降會導致血磷升高，需使用磷結合劑控制磷水平，並注意與其他藥物的相互作用。\n\n" +
            "活性維他命D：用於治療腎性骨病，需監測血鈣、血磷及副甲狀腺激素（PTH）水平，避免過量。\n\n" +
            "紅血球生成素刺激劑（ESA）：用於治療貧血，需監測血紅素水平，避免過快上升。\n\n" +
            "抗生素：如有感染徵兆，需依醫師指示使用抗生素，並完成療程。",

            "  3. 藥物管理建議:\n" +
            "藥物紀錄：建立藥物使用紀錄，包括藥物名稱、劑量、服用時間及可能的副作用。\n\n" +
            "定期回診：定期回診，與醫師討論藥物使用情況，必要時調整治療方案。\n\n" +
            "藥物儲存：藥物應存放於乾燥陰涼處，避免陽光直射，並遠離兒童可及範圍。\n\n" +
            "藥物過期處理：過期或不再使用的藥物應依醫院或藥局指示妥善處理，避免自行丟棄。",

            "  4. 藥物與透析的關係:\n" +
            "透析對藥物的影響：腹膜透析可能影響某些藥物的吸收或清除，需與醫師討論藥物調整。\n\n" +
            "透析前後的服藥時間：某些藥物應在透析前或透析後服用，避免與透析液相互作用。"
        };
        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void bodyClicked(object sender, EventArgs e)
    {
        string title = "身體與心理狀況追蹤:";
        string[] faq = new string[]
        {
            "  1. 身體狀況追蹤:\n\n" +
            "1.1 日常自我監測:\n\n" +
            "體重：\n每日同一時間、同一服裝下測量（建議早上起床空腹、排空導管後）。\n" +
            "記錄「實測體重」與「乾體重」差值，若超過 2–3%（兩次透析間），即需調整飲水量或透析處方。\n\n" +
            "血壓與脈搏：\n每次透析前、透析後各測一次。\n" +
            "記錄坐姿與立姿血壓，觀察有無姿勢性低血壓。\n" +
            "注意頭暈、心悸等低血壓或高血壓症狀。\n\n" +
            "腹圍與水腫檢查：\n定期測量腹部圍度，若突然增加可能有腹水或積液。\n" +
            "觀察下肢、足部是否水腫、壓痕性水腫（按壓凹陷即水腫）。\n\n" +
            "透析液外觀與引流量：\n每次引流後檢視液體是否清澈無懸浮物。\n" +
            "記錄注入量與引流量差值，若引流量持續減少，注意導管阻塞或黏連。\n\n" +
            "尿量與餘留尿：\n若有自主排尿，記錄每日尿量。\n" +
            "觀察有無血尿、蛋白尿或混濁現象。",

            "1.2 定期檢查項目:\n\n" +
            "血液檢查（每 1–3 月）：\n血清白蛋白、BUN/Cr、電解質（Na⁺、K⁺、Cl⁻、Ca²⁺、PO₄³⁻）。\n" +
            "糖化血色素（HbA1c，若合併糖尿病）。\n" +
            "全血球計數（感染指標：WBC；貧血指標：Hb、Hct）。\n\n" +
            "腹腔透析液培養（有混濁或感染徵象時）：\n送培養鑑定病原菌，並配合抗生素治療。\n\n" +
            "心電圖與心臟超音波（有心血管病史者）：\n監測心功能與容積負荷狀況。",

            "  2. 心理狀況追蹤:\n\n" +
            "2.1 自我覺察與記錄\n\n" +
            "情緒日誌：\n每日簡單記錄心情狀態（平靜、焦慮、憂鬱、易怒等）。\n註記產生壓力的事件或思緒。\n\n" +
            "睡眠品質：\n記錄入睡時間、夜間醒來次數與清晨起床時間。\n評估日間疲倦、注意力不集中情形。\n\n" +
            "疲勞與體力：\n使用簡易疲勞量表（例如 0–10 分級）每日評估。\n" +
            "留意活動後是否需長時間休息或心跳、呼吸急促。",

            "2.2 親友與團隊支持:\n\n" +
            "家庭互動：\n定期與家人分享治療進度與感受，請家人協助觀察情緒變化。\n" +
            "安排行動陪伴與共同活動，減少孤立感。\n\n" +
            "社會支持：\n參加病友團體或網路論壇，互相鼓勵與經驗交流。\n" +
            "如有宗教或志工支持，可適度參加靜心、冥想、閱讀等活動。",

            "2.3 專業評估與介入:\n\n" +
            "心理篩檢（每 3–6 月）：\n使用簡易量表（PHQ-9 抑鬱量表、GAD-7 焦慮量表）評估情緒狀態。\n\n" +
            "諮商與治療：\n若量表顯示中重度焦慮或憂鬱，建議轉介心理師或精神科醫師。\n" +
            "可考慮團體支持、正念減壓課程（MBSR）或心智圖像療法。\n\n" +
            "藥物輔助：\n必要時在醫師評估下，使用抗焦慮或抗憂鬱藥物。"
        };
        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void hosClicked(object sender, EventArgs e)
    {
        string title = "定期追蹤與醫療合作:";
        string[] faq = new string[]
        {
            "  1. 定期回診與檢查:\n\n" +
            "定期回診：\n患者應依醫師指示，定期回診進行健康評估與治療調整。\n\n" +
            "定期檢查：\n包括血液檢查（如血清白蛋白、BUN、Cr、電解質等）、腹腔透析液培養、心電圖等，評估透析效果與併發症風險。",

            "  2. 與醫療團隊的合作:\n\n" +
            "主治醫師：\n負責整體治療計劃的制定與調整，監測透析效果與併發症。\n\n" +
            "護理師：\n提供透析操作指導、衛教與情緒支持，協助患者建立自我照護能力。\n\n" +
            "營養師：\n根據患者的營養狀況，提供個別化的飲食建議，維持營養平衡。\n\n" +
            "社工師：\n協助患者了解社會資源，提供心理支持與生活輔導。",

            "  3. 健康數據的紀錄與管理:\n\n" +
            "健康數據紀錄：\n患者應每日記錄體重、血壓、透析液進出量、尿量等數據，並定期與醫療團隊分享。\n\n" +
            "數據管理：\n利用電子健康紀錄系統或手機應用程式，協助患者與醫療團隊追蹤健康狀況。",

            "  4. 教育訓練與自我照護:\n\n" +
            "教育訓練：\n醫療團隊應定期提供透析操作、飲食管理、心理調適等方面的教育訓練，提升患者的自我照護能力。\n\n" +
            "自我照護：\n患者應積極參與自我照護，遵守醫囑，定期回診，維持良好的生活習慣。"
        };
        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void mineClicked(object sender, EventArgs e)
    {
        string title = "自我學習與健康識能提升:";
        string[] faq = new string[]
        {
            "  1. 多元學習管道:\n\n" +
            "影音教學資源：\n書中提供 QR Code，連結至影音教學平台，患者可觀看由護理師親自示範的換液操作影片，並提供國語、臺語、英文及印尼語版本，方便不同語言背景的患者學習。\n\n" +
            "圖文解說：\n書中以全彩圖解方式，詳細說明腹膜透析的操作流程、注意事項及常見問題，讓患者能夠輕鬆理解並應用於日常生活中。",

            "  2. 知識更新與持續學習:\n\n" +
            "定期回診與衛教：\n患者應定期回診，與醫療團隊討論治療進展，並參與衛教課程，了解最新的治療方法與健康管理知識。\n\n" +
            "參與病友支持團體：\n透過與其他患者交流，分享經驗與學習，增進自我照護能力，並獲得情感支持。",

            "  3. 健康管理與自我監測:\n\n" +
            "紀錄健康數據：\n患者應每日記錄體重、血壓、透析液進出量、尿量等數據，並定期與醫療團隊分享，協助調整治療計劃。\n\n" +
            "使用健康管理工具：\n利用手機應用程式或電子健康紀錄系統，追蹤健康狀況，並提醒服藥與回診時間。",

            "  4. 提升生活品質與心理調適:\n\n" +
            "建立正向思維：\n透過閱讀、冥想、音樂等方式，培養正向思維，提升心理韌性，面對治療過程中的挑戰。\n\n" +
            "維持規律生活：\n保持規律作息、均衡飲食、適度運動，有助於身心健康，提升生活品質。"
        };
        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void emojiClicked(object sender, EventArgs e)
    {
        string title = "心理調適與支援:";
        string[] faq = new string[]
        {
            "  1. 情緒覺察與自我調適:\n\n" +
            "定期自我檢視情緒狀態：\n透析患者可能面臨焦慮、憂鬱等情緒，建議每日記錄心情變化，辨識情緒波動的原因。\n\n" +
            "建立正向思維：\n透過閱讀、冥想、音樂等方式，培養正向思維，提升心理韌性。\n\n" +
            "設定可達成的目標：\n制定短期與長期目標，逐步實現，增強自我效能感。",

            "  2. 家庭與社會支持系統:\n\n" +
            "與家人保持良好溝通：\n分享治療進展與情緒狀態，增進理解與支持。\n\n" +
            "參與病友支持團體：\n透過與其他患者交流，獲得情感支持與實務建議。\n\n" +
            "利用社會資源：\n申請政府提供的喘息服務，減輕照護壓力，維持家庭功能。",

            "  3. 專業心理支援:\n\n" +
            "定期心理評估：\n使用簡易量表（如PHQ-9、GAD-7）評估情緒狀態，及早發現問題。\n\n" +
            "尋求專業諮詢：\n如有需要，諮詢心理師或精神科醫師，獲得專業建議與治療。\n\n" +
            "參加心理健康課程：\n參與正念減壓（MBSR）等課程，提升情緒調適能力。",

            "  4. 提升自我照護能力:\n\n" +
            "學習透析相關知識：\n透過閱讀、影音教學等方式，增強自我照護能力，提升自信心。\n\n" +
            "建立日常健康習慣：\n維持規律作息、適度運動、均衡飲食，有助於身心健康。"
        };
        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void socialClicked(object sender, EventArgs e)
    {
        string title = "經濟與社會資源運用:";
        string[] faq = new string[]
        {
            "  1. 政府補助與保險資源:\n\n" +
            "健保給付：\n腹膜透析治療在健保給付範圍內，患者可申請相關項目，減輕醫療費用負擔。\n\n" +
            "低收入戶補助：\n符合資格的患者可申請低收入戶補助，獲得生活與醫療費用的支持。\n\n" +
            "身心障礙手冊：\n持有身心障礙手冊者，可享有相關補助與福利，減輕生活壓力。",

            "  2. 社會福利與資源連結:\n\n" +
            "社會局服務：\n各地社會局提供多項服務，包括居家照護、喘息服務、生活輔具租借等，協助患者與家庭減輕照護壓力。\n\n" +
            "慈善機構援助：\n如慈濟醫院等慈善機構，提供醫療、生活等方面的援助，患者可主動聯繫，獲得協助。\n\n" +
            "社區資源：\n社區內的志工團體、教會等，亦提供陪伴、關懷等服務，增進患者的社會支持。",

            "  3. 就業與生活支持:\n\n" +
            "就業服務：\n部分機構提供就業輔導與職業訓練，協助患者重返工作崗位，維持生活品質。\n\n" +
            "生活輔具：\n患者可申請生活輔具，如輪椅、助行器等，改善日常生活功能。\n\n" +
            "心理諮詢：\n提供心理諮詢服務，協助患者調適心情，面對疾病挑戰。",

            "  4. 資源申請與協助:\n\n" +
            "申請流程：\n患者可向醫療機構、社會局等單位詢問資源申請流程，獲得必要的協助。\n\n" +
            "文件準備：\n申請資源時，需準備相關文件，如病歷證明、收入證明等，確保申請順利。\n\n" +
            "專業協助：\n醫療機構的社工師、護理師等，可提供資源申請的指導與協助，減少患者的困難。"
        };
        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void sosClicked(object sender, EventArgs e)
    {
        string title = "災難應變與緊急備案:";
        string[] faq = new string[]
        {
            "  1. 建立個人化的緊急應變計畫:\n\n" +
            "制定應變計畫：\n與醫療團隊共同制定個人化的災難應變計畫，包含緊急聯絡人、最近的醫療機構、避難路線等資訊。\n\n" +
            "定期演練：\n定期與家人進行災難應變演練，確保在災難發生時能迅速反應。",

            "  2. 準備緊急備用物資:\n\n" +
            "透析相關物資：\n準備至少3天的透析液、導管、消毒用品等，並確保這些物資在有效期限內。\n\n" +
            "生活必需品：\n備妥飲用水、非易腐食物、手電筒、電池、收音機、現金、個人藥物等。",

            "  3. 災難發生時的應對措施:\n\n" +
            "保持冷靜：\n在災難發生時，保持冷靜，按照預先制定的應變計畫行動。\n\n" +
            "確保安全：\n確保自身安全後，評估是否可以繼續進行透析操作，若無法，立即聯繫醫療機構。",

            "  4. 與醫療機構的聯繫:\n\n" +
            "更新聯絡資訊：\n定期更新醫療機構的聯絡資訊，確保在緊急情況下能迅速聯繫。\n\n" +
            "了解支援資源：\n了解當地政府或非營利組織在災難時提供的支援資源，如避難所、醫療支援等。",

            "  5. 教育與訓練:\n\n" +
            "參加培訓課程：\n參加由醫療機構舉辦的災難應變培訓課程，提升應對災難的能力。\n\n" +
            "家庭成員教育：\n教育家庭成員了解透析操作流程及災難應變計畫，確保在患者無法自行操作時，家人能提供協助。"
        };
        await Navigation.PushAsync(new EducationPage(title, faq));
    }
    private async void familyClicked(object sender, EventArgs e)
    {
        string title = "家庭照護者指南:";
        string[] faq = new string[]
        {
            "  1. 角色與責任:\n\n" +
            "主要照護者：\n通常為患者的配偶、子女或直系親屬，負責協助患者進行腹膜透析操作、監測健康狀況、管理藥物及飲食等。\n\n" +
            "支持角色：\n其他家庭成員可協助照護者分擔部分責任，如陪伴患者就醫、協助家務等，共同維護患者的生活品質。",

            "  2. 腹膜透析操作協助:\n\n" +
            "學習操作技巧：\n照護者應與患者共同學習腹膜透析的操作流程，包括洗手、準備透析液、消毒導管出口、注入透析液、等待滲透時間、排出透析液等步驟。\n\n" +
            "監督操作過程：\n在患者進行透析操作時，照護者應在旁協助，確保操作正確，並及時處理可能出現的問題。",

            "  3. 健康監測與紀錄:\n\n" +
            "監測生命徵象：\n定期測量患者的體重、血壓、血糖等指標，並記錄變化情況。\n\n" +
            "紀錄透析數據：\n每日記錄透析液的進出量、尿量、透析時間等，並與醫療團隊分享，協助調整治療計劃。",

            "  4. 飲食與藥物管理:\n\n" +
            "協助飲食規劃：\n根據營養師的建議，協助患者制定適合的飲食計劃，控制鉀、磷、鈉等電解質的攝取。\n\n" +
            "管理藥物使用：\n協助患者按時服用藥物，並監測可能的副作用，必要時與醫療團隊溝通。",

            "  5. 情緒支持與心理調適:\n\n" +
            "提供情緒支持：\n傾聽患者的心聲，理解其情緒變化，提供安慰與鼓勵。\n\n" +
            "協助心理調適：\n鼓勵患者參與支持團體，與其他病友交流經驗，減輕心理壓力。",

            "  6. 緊急應變與災難備案:\n\n" +
            "制定應急計劃：\n與醫療團隊共同制定緊急應變計劃，包括透析液儲備、導管護理、突發情況處理等。\n\n" +
            "災難備案準備：\n在自然災害或突發事件發生前，準備足夠的透析物資，確保患者在家中也能進行透析。",

            "  7. 自我照護與學習:\n\n" +
            "持續學習：\n參加醫療機構或社區舉辦的衛教課程，提升自我照護知識與技能。\n\n" +
            "尋求支持：\n加入照護者支持團體，與其他照護者交流經驗，獲得情感支持與實務建議。"
        };
        await Navigation.PushAsync(new EducationPage(title, faq));
    }

    private void ApplyFontSize(int size)
    {
        // 根據你 Knowledge 頁面上的元件設定字體大小
        // 例如你有標題 Label 或多個 Button：
        // titleLabel.FontSize = size;
        // 如果按鈕是透過 XAML 設定好名稱：
        // categoryButton1.FontSize = size;
        // categoryButton2.FontSize = size;

        // 如果你沒有個別命名按鈕，而是用 XAML 樣式自動產生，也可以在 CategoryButton_Clicked 中取得 sender 為 Button 時改大小，
        // 但建議是直接在此針對主要 Label/Title 做設定即可。

        // 範例：
        // 如果 Knowledge.xaml 有一個名稱為 knowledgeTitle 的 Label：
        // knowledgeTitle.FontSize = size;
    }
}